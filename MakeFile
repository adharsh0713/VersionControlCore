# Compiler and flags
CC = gcc
CFLAGS = -Wall -Wextra -Iinclude

# Executable name
OUT = git_sim

# Source files
SRC = src/commit.c \
      src/repo.c \
      src/branch.c \
      src/merge.c \
      src/graph.c \
      src/utils.c \
      main.c

# Build target
all: $(OUT)

$(OUT): $(SRC)
	@echo "Compiling Mini Git Simulation..."
	$(CC) $(SRC) $(CFLAGS) -o $(OUT)
	@echo "Build complete! Run './$(OUT)' to start."

# Run program
run: $(OUT)
	@./$(OUT)

# Clean up build files
clean:
	@echo "Cleaning up..."
	-rm -f $(OUT)
	@echo "Clean complete."

# Phony targets to avoid file name conflicts
.PHONY: all run clean
